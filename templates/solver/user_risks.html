<table class="table">
    <thead>
        <tr>
            <th>Название риска</th>
            <th>Объект защиты</th>
            <th>Угрозы</th>
            <th>Возможные потери</th>
            <th>Степень риска</th>
            <th>Уровень риска</th>
        </tr>
    </thead>
    <tbody>
        {% for risk in risks %}
        {% with risk_level=risk.get_risk_level %}
        <tr>
            <td>{{ risk.name }}</td>
            <td>{{ risk.general_object.name }}</td>
            <td>
                {% for threat in risk.threats.all %}
                {{ threat.name }}{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </td>
            <td>{{ risk.money_loss }} руб.</td>
            <td>{{ risk_level.value|floatformat:2 }}</td>
            <td>
                <span class="risk-badge risk-{{ risk_level.class }}">
                    {{ risk_level.text }}
                </span>
            </td>
        </tr>
        {% endwith %}
        {% endfor %}
    </tbody>
</table>
<style>
    .risk-badge {
        padding: 0.35em 0.65em;
        border-radius: 0.25rem;
        font-weight: 700;
    }
    .risk-low {
        background-color: #d1e7dd;
        color: #0f5132;
    }
    .risk-medium {
        background-color: #fff3cd;
        color: #664d03;
    }
    .risk-high {
        background-color: #f8d7da;
        color: #842029;
    }
</style>